"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.abortTask=exports.runTask=void 0;const tslib_1=require("tslib"),worker_manager_1=require("./worker_manager"),childprocess_manager_1=require("./childprocess_manager"),processTask=require("./task/index"),log=require("../utils/log");tslib_1.__exportStar(require("./config"),exports);const workerManager=worker_manager_1.getWorkerManager(void 0!==process.env.__nwjs);async function runTask(r,e,a=(()=>{})){try{return process.__nwjs&&"wechatwebdevtools"===nw.App.manifest.appname?await childprocess_manager_1.childProcessManager.runTask(r,e,a):await workerManager.runTask(r,e,a)}catch(a){if(a===worker_manager_1.AbortEvent)throw a;return log.error("runTask catch error "+a),processTask(r,e)}}function abortTask(r){workerManager.abort(r)}exports.runTask=runTask,exports.abortTask=abortTask;